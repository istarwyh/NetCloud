ark.add("disk.util.PageVisibility",function(){var A=null,B=null;if(typeof document.hidden!=="undefined"){B="hidden";A="visibilitychange";}else{if(typeof document.mozHidden!=="undefined"){B="mozHidden";A="mozvisibilitychange";}else{if(typeof document.msHidden!=="undefined"){B="msHidden";A="msvisibilitychange";}else{if(typeof document.webkitHidden!=="undefined"){B="webkitHidden";A="webkitvisibilitychange";}}}}var _=function(){this._mHidden=B;this._mVisibilityChange=A;this._mInternalCallback=null;this._mCallback=null;this._mPollingTimer=null;};_.INTERVAL=1000;_.prototype={listen:function(B,C){var D=this,A=false;this._mCallback=B;if(this._mHidden){A=true;this._internalListen();}else{if(C!==true){this._mPollingTimer=setInterval(function(){D.polling();},_.INTERVAL);}}return A;},_internalListen:function(_){var A=this;if(this._mHidden){this._mInternalCallback=function(_){if(typeof A._mCallback=="function"){A._mCallback.call(A,document[A._mHidden]);}};document.addEventListener(this._mVisibilityChange,this._mInternalCallback,false);}},polling:function(){if(typeof this._mCallback=="function"){this._mCallback.call(this);}},unlisten:function(){if(this._mHidden){document.removeEventListener(this._mVisibilityChange,this._mInternalCallback,false);this._mCallback=null;}else{clearInterval(this._mPollingTimer);this._mPollingTimer=null;this._mCallback=null;}}};ark.exports("disk.util.PageVisibility","PageVisibility",_);return _;});